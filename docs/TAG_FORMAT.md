# .tag 文件格式说明

用于为每个视频存储对应标签，便于与视频文件一起备份或迁移。

## 命名与位置

- **文件名**：`视频名.tag`（与视频主文件名相同，扩展名为 `.tag`）
- **位置**：与对应视频文件**同一目录**
- **示例**：`卡路里.mp4` 的标签文件为同目录下的 `卡路里.tag`

## 文件内容

- **编码**：UTF-8  
- **格式**：JSON  

```json
{
  "version": 1,
  "tags": ["标签1", "标签2", "标签3"]
}
```

| 字段     | 类型     | 说明 |
|----------|----------|------|
| `version` | number   | 格式版本，当前为 `1`，保留扩展用 |
| `tags`    | string[] | 标签字符串数组，顺序可保留 |

## 应用行为

- 扫描视频库时，若某视频同目录下存在对应 `.tag` 文件，则**优先从该文件读取标签**。
- 若不存在 `.tag`，则使用应用内原有存储（SharedPreferences）中的标签。
- 在详情页编辑并保存标签时，应用会尝试写入同目录下的 `.tag` 文件（若不存在则尝试创建），并同时更新应用内存储，以兼容列表展示与无写权限场景。

## 示例

目录结构：

```
视频库/
  卡路里.mp4
  卡路里.tag
  卡路里.funscript
```

`卡路里.tag` 内容：

```json
{"version":1,"tags":["运动","教程"]}
```
